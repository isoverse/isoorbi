<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Raw Files • isoorbi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Raw Files">
<meta name="description" content="An example for reading raw files.
">
<meta property="og:description" content="An example for reading raw files.
">
<meta property="og:image" content="https://isoorbi.isoverse.org/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">isoorbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/quick_start.html">Quick Start</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/shot_noise.html">Shot Noise</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/dual_inlet.html">Dual Inlet</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/flow_injection.html">Flow Injection</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.isoverse.org/2024_kantnerova_et_al/">Katnerova et al. 2024</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/isoverse/isoorbi"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Raw Files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/isoverse/isoorbi/blob/main/vignettes/raw_files.Rmd" class="external-link"><code>vignettes/raw_files.Rmd</code></a></small>
      <div class="d-none name"><code>raw_files.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="read-raw-files">Read raw files<a class="anchor" aria-label="anchor" href="#read-raw-files"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://isoorbi.isoverse.org/">isoorbi</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># raw files directory</span></span>
<span><span class="va">raw_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"isoorbi"</span>, <span class="st">"extdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># read files</span></span>
<span><span class="va">raw_files</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">raw_folder</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/orbi_find_raw.html">orbi_find_raw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/orbi_read_raw.html">orbi_read_raw</a></span><span class="op">(</span>include_spectra <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show summary for the read files</span></span>
<span><span class="va">raw_files</span></span></code></pre></div>
<pre class="fansi fansi-message"><code>──────────────── <span style="font-weight: bold;">3 raw files - combine with orbi_aggregate_raw()</span> ───────────────
</code></pre>
<pre class="fansi fansi-message"><code>1. <span style="color: #0000BB;">nitrate_test_10scans.raw</span> has    10 <span style="color: #00BB00;">scans</span> with   126 <span style="color: #00BB00;">peaks</span>; + loaded 2
<span style="color: #00BB00;">spectra</span> (618 points)
2. <span style="color: #0000BB;">nitrate_test_1scan.raw</span>   has     1 <span style="color: #00BB00;">scans</span> with    12 <span style="color: #00BB00;">peaks</span>; + loaded 1
<span style="color: #00BB00;">spectrum</span> (325 points)
3. <span style="color: #0000BB;">testfile_dual_inlet.raw</span>  encountered <span style="color: #BBBB00;">1 warning</span>; has 12338 <span style="color: #00BB00;">scans</span> with 51771
<span style="color: #00BB00;">peaks</span>; + loaded 2 <span style="color: #00BB00;">spectra</span> (277 points)
</code></pre>
</div>
<div class="section level2">
<h2 id="combine-aggregate-data">Combine (aggregate) data<a class="anchor" aria-label="anchor" href="#combine-aggregate-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># aggregate raw data</span></span>
<span><span class="va">agg_data</span> <span class="op">&lt;-</span> <span class="va">raw_files</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/orbi_aggregate_raw.html">orbi_aggregate_raw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-message"><code><span style="color: #00BB00;">✔</span> <span style="color: #B2B2B2;">[828ms]</span> <span style="font-weight: bold;">aggregate_files()</span> aggregated <span style="color: #0000BB;">file_info</span> (3), <span style="color: #0000BB;">scans</span> (12.35k), <span style="color: #0000BB;">peaks</span>
(51.91k), and <span style="color: #0000BB;">spectra</span> (1.22k) from 3 files using the <span style="font-weight: bold; font-style: italic;">standard</span> aggregator
</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">agg_data</span></span></code></pre></div>
<pre class="fansi fansi-message"><code>─────── <span style="font-weight: bold;">aggregated data from 3 raw files - retrieve with orbi_get_data()</span> ───────
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">file_info</span> (3): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">filepath</span>, <span style="color: #00BB00;">filename</span>, <span style="color: #00BB00;">creation_date</span>, <span style="color: #00BB00;">in_aquisition</span>,
<span style="color: #00BB00;">Operator</span>, <span style="color: #00BB00;">FileDescription</span>, <span style="color: #00BB00;">MassResolution</span>, <span style="color: #00BB00;">SpectraCount</span>, <span style="color: #00BB00;">FirstSpectrum</span>,
<span style="color: #00BB00;">LastSpectrum</span>, <span style="color: #00BB00;">StartTime</span>, <span style="color: #00BB00;">EndTime</span>, <span style="color: #00BB00;">LowMass</span>, <span style="color: #00BB00;">HighMass</span>, <span style="color: #00BB00;">InstrumentCount</span>,
<span style="color: #00BB00;">InstrumentModel</span>, <span style="color: #00BB00;">InstrumentName</span>, <span style="color: #00BB00;">SerialNumber</span>, <span style="color: #00BB00;">SoftwareVersion</span>,
<span style="color: #00BB00;">HardwareVersion</span>, <span style="color: #00BB00;">RawFileVersion</span>, <span style="color: #00BB00;">InstrumentUnits</span>, <span style="color: #00BB00;">Comment</span>, <span style="color: #00BB00;">SampleId</span>,
<span style="color: #00BB00;">SampleName</span>, <span style="color: #00BB00;">SampleType</span>, <span style="color: #00BB00;">SampleWeight</span>, <span style="color: #00BB00;">SampleVolume</span>, <span style="color: #00BB00;">Barcode</span>, <span style="color: #00BB00;">RowNumber</span>, <span style="color: #00BB00;">Vial</span>,
<span style="color: #00BB00;">InjectionVolume</span>, <span style="color: #00BB00;">DilutionFactor</span>, <span style="color: #00BB00;">IstdAmount</span>, <span style="color: #00BB00;">CalibrationLevel</span>,
<span style="color: #00BB00;">InstrumentMethodFile</span>, <span style="color: #00BB00;">CalibrationFile</span>, <span style="color: #00BB00;">ProcessingMethodFile</span>, <span style="color: #00BB00;">UserText0</span>,
<span style="color: #00BB00;">UserText1</span>, <span style="color: #00BB00;">UserText2</span>, <span style="color: #00BB00;">UserText3</span>, <span style="color: #00BB00;">UserText4</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">scans</span> (12.35k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">time.min</span>, <span style="color: #00BB00;">tic</span>, <span style="color: #00BB00;">it.ms</span>, <span style="color: #00BB00;">resolution</span>, <span style="color: #00BB00;">basePeakMz</span>,
<span style="color: #00BB00;">basePeakIntensity</span>, <span style="color: #00BB00;">lowMass</span>, <span style="color: #00BB00;">highMass</span>, <span style="color: #00BB00;">rawOvFtT</span>, <span style="color: #00BB00;">intensCompFactor</span>, <span style="color: #00BB00;">agc</span>,
<span style="color: #00BB00;">agcTarget</span>, <span style="color: #00BB00;">microscans</span>, <span style="color: #00BB00;">numberLockmassesFound</span>, <span style="color: #00BB00;">analyzerTemperature</span>; (<span style="font-style: italic;">not</span>
<span style="font-style: italic;">aggregated</span>: <span style="color: #BBBB00; font-style: italic;">IsCentroidScan</span>, <span style="color: #BBBB00; font-style: italic;">ScanType</span>, <span style="color: #BBBB00; font-style: italic;">Scan Description</span>, <span style="color: #BBBB00; font-style: italic;">Multiple Injection</span>,
<span style="color: #BBBB00; font-style: italic;">Multi Inject Info</span>, <span style="color: #BBBB00; font-style: italic;">Scan Segment</span>, <span style="color: #BBBB00; font-style: italic;">Scan Event</span>, <span style="color: #BBBB00; font-style: italic;">Master Index</span>, <span style="color: #BBBB00; font-style: italic;">Master Scan Number</span>,
<span style="color: #BBBB00; font-style: italic;">Charge State</span>, <span style="color: #BBBB00; font-style: italic;">Monoisotopic M/Z</span>, <span style="color: #BBBB00; font-style: italic;">Error in isotopic envelope fit</span>, <span style="color: #BBBB00; font-style: italic;">Max. Ion Time</span>
<span style="color: #BBBB00; font-style: italic;">(ms)</span>, <span style="color: #BBBB00; font-style: italic;">MS2 Isolation Width</span>, <span style="color: #BBBB00; font-style: italic;">MS2 Isolation Offset</span>, <span style="color: #BBBB00; font-style: italic;">HCD Energy</span>, <span style="color: #BBBB00; font-style: italic;">HCD Energy V</span>, <span style="color: #BBBB00; font-style: italic;">===</span>
<span style="color: #BBBB00; font-style: italic;">Mass Calibration: ===</span>, <span style="color: #BBBB00; font-style: italic;">Conversion Parameter B</span>, <span style="color: #BBBB00; font-style: italic;">Conversion Parameter C</span>,
<span style="color: #BBBB00; font-style: italic;">Temperature Comp. (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">RF Comp. (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">Space Charge Comp. (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">Resolution</span>
<span style="color: #BBBB00; font-style: italic;">Comp. (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">Number of Lock Masses</span>, <span style="color: #BBBB00; font-style: italic;">Lock Mass #1 (m/z)</span>, <span style="color: #BBBB00; font-style: italic;">Lock Mass #2 (m/z)</span>,
<span style="color: #BBBB00; font-style: italic;">Lock Mass #3 (m/z)</span>, <span style="color: #BBBB00; font-style: italic;">LM Search Window (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">LM Search Window (mmu)</span>, <span style="color: #BBBB00; font-style: italic;">Last</span>
<span style="color: #BBBB00; font-style: italic;">Locking (sec)</span>, <span style="color: #BBBB00; font-style: italic;">LM m/z-Correction (ppm)</span>, <span style="color: #BBBB00; font-style: italic;">=== Ion Optics Settings: ===</span>, <span style="color: #BBBB00; font-style: italic;">S-Lens RF</span>
<span style="color: #BBBB00; font-style: italic;">Level</span>, <span style="color: #BBBB00; font-style: italic;">==== Diagnostic Data: ====</span>, <span style="color: #BBBB00; font-style: italic;">Application Mode</span>, <span style="color: #BBBB00; font-style: italic;">Mild Trapping Mode</span>, <span style="color: #BBBB00; font-style: italic;">APD</span>,
<span style="color: #BBBB00; font-style: italic;">Res. Dep. Intens</span>, <span style="color: #BBBB00; font-style: italic;">Q Trans Comp</span>, <span style="color: #BBBB00; font-style: italic;">PrOSA NumF</span>, <span style="color: #BBBB00; font-style: italic;">PrOSA Comp</span>, <span style="color: #BBBB00; font-style: italic;">PrOSA ScScr</span>, <span style="color: #BBBB00; font-style: italic;">Dynamic RT</span>
<span style="color: #BBBB00; font-style: italic;">Shift (min)</span>, <span style="color: #BBBB00; font-style: italic;">Analytical OT usage (%)</span>, <span style="color: #BBBB00; font-style: italic;">LC FWHM parameter</span>, <span style="color: #BBBB00; font-style: italic;">PS Inj. Time (ms)</span>, <span style="color: #BBBB00; font-style: italic;">AGC</span>
<span style="color: #BBBB00; font-style: italic;">PS Mode</span>, <span style="color: #BBBB00; font-style: italic;">AGC PS Diag</span>, <span style="color: #BBBB00; font-style: italic;">AGC Target Adjust</span>, <span style="color: #BBBB00; font-style: italic;">AGC Diag 1</span>, <span style="color: #BBBB00; font-style: italic;">AGC Diag 2</span>, <span style="color: #BBBB00; font-style: italic;">HCD abs.</span>
<span style="color: #BBBB00; font-style: italic;">Offset</span>, <span style="color: #BBBB00; font-style: italic;">Source CID eV</span>, <span style="color: #BBBB00; font-style: italic;">AGC Fill</span>, <span style="color: #BBBB00; font-style: italic;">Injection t0</span>, <span style="color: #BBBB00; font-style: italic;">t0 FLP</span>, <span style="color: #BBBB00; font-style: italic;">Iso Para R</span>, <span style="color: #BBBB00; font-style: italic;">Inj Para R</span>,
<span style="color: #BBBB00; font-style: italic;">Access Id</span>, <span style="color: #BBBB00; font-style: italic;">Analog In A (V)</span>, <span style="color: #BBBB00; font-style: italic;">Analog In B (V)</span>, <span style="color: #BBBB00; font-style: italic;">FAIMS Attached</span>, <span style="color: #BBBB00; font-style: italic;">FAIMS Voltage On</span>,
<span style="color: #BBBB00; font-style: italic;">FAIMS CV</span>)
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">peaks</span> (51.91k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">mzMeasured</span>, <span style="color: #00BB00;">intensity</span>, <span style="color: #00BB00;">baseline</span>, <span style="color: #00BB00;">peakNoise</span>,
<span style="color: #00BB00;">peakResolution</span>, <span style="color: #00BB00;">isRefPeak</span>, <span style="color: #00BB00;">isLockPeak</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">spectra</span> (1.22k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">mz</span>, <span style="color: #00BB00;">intensity</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">problems</span>: has a total of <span style="color: #BBBB00;">1 warning</span> → check with <span style="font-weight: bold;">orbi_get_problems(x)</span>
</code></pre>
<div class="section level3">
<h3 id="optional-use-a-different-aggregator">Optional: use a different aggregator<a class="anchor" aria-label="anchor" href="#optional-use-a-different-aggregator"></a>
</h3>
<p>The <code>minimal</code> aggregator contains a smaller set of columns
to aggregate. The <code>extended</code> aggregator is more elaborate,
providing access to additional columns from the raw data files.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># example: minimal vs. extended aggregator</span></span>
<span><span class="fu"><a href="../reference/orbi_aggregator.html">orbi_get_aggregator</a></span><span class="op">(</span><span class="st">"minimal"</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-message"><code>────────────────────────────── <span style="font-weight: bold;">Aggregator </span><span style="font-weight: bold; font-style: italic;">minimal</span> ──────────────────────────────
</code></pre>
<pre class="fansi fansi-message"><code><span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">file_info</span>:
 → <span style="color: #00BB00;">filename</span> = <span style="font-style: italic;">as.character(sub(FileName, pattern = ".raw", replacement = "",</span>
<span style="font-style: italic;">fixed = TRUE))</span>
 → <span style="color: #00BB00;">creation_date</span> = <span style="font-style: italic;">as.POSIXct(CreationDate)</span>
 → <span style="color: #00BB00;">in_aquisition</span> = <span style="font-style: italic;">as.logical(InAquisition)</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">scans</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">time.min</span> = <span style="font-style: italic;">as.numeric(StartTime)</span>
 → <span style="color: #00BB00;">tic</span> = <span style="font-style: italic;">as.numeric(TIC)</span>
 → <span style="color: #00BB00;">it.ms</span> = <span style="font-style: italic;">as.numeric(`Ion Injection Time (ms)`)</span>
 → <span style="color: #00BB00;">resolution</span> = <span style="font-style: italic;">as.numeric(one_of(`FT Resolution`, `Orbitrap Resolution`))</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">peaks</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">mzMeasured</span> = <span style="font-style: italic;">as.numeric(mass)</span>
 → <span style="color: #00BB00;">intensity</span> = <span style="font-style: italic;">as.numeric(intensity)</span>
 → <span style="color: #00BB00;">baseline</span> = <span style="font-style: italic;">as.numeric(baseline)</span>
 → <span style="color: #00BB00;">peakNoise</span> = <span style="font-style: italic;">as.numeric(noise)</span>
 → <span style="color: #00BB00;">peakResolution</span> = <span style="font-style: italic;">as.numeric(resolution)</span>
 → <span style="color: #00BB00;">isRefPeak</span> = <span style="font-style: italic;">as.logical(is_ref)</span>
 → <span style="color: #00BB00;">isLockPeak</span> = <span style="font-style: italic;">as.logical(is_lock_peak)</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">spectra</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">mz</span> = <span style="font-style: italic;">as.numeric(mass)</span>
 → <span style="color: #00BB00;">intensity</span> = <span style="font-style: italic;">as.numeric(intensity)</span>
</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/orbi_aggregator.html">orbi_get_aggregator</a></span><span class="op">(</span><span class="st">"extended"</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-message"><code>────────────────────────────── <span style="font-weight: bold;">Aggregator </span><span style="font-weight: bold; font-style: italic;">extended</span> ─────────────────────────────
</code></pre>
<pre class="fansi fansi-message"><code><span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">file_info</span>:
 → <span style="color: #00BB00;">filename</span> = <span style="font-style: italic;">as.character(sub(FileName, pattern = ".raw", replacement = "",</span>
<span style="font-style: italic;">fixed = TRUE))</span>
 → <span style="color: #00BB00;">creation_date</span> = <span style="font-style: italic;">as.POSIXct(CreationDate)</span>
 → <span style="color: #00BB00;">in_aquisition</span> = <span style="font-style: italic;">as.logical(InAquisition)</span>
 → <span style="color: #BB00BB;">(.*)</span> = <span style="font-style: italic;">as.character(all_matches("(.*)"))</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">scans</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">time.min</span> = <span style="font-style: italic;">as.numeric(StartTime)</span>
 → <span style="color: #00BB00;">tic</span> = <span style="font-style: italic;">as.numeric(TIC)</span>
 → <span style="color: #00BB00;">it.ms</span> = <span style="font-style: italic;">as.numeric(`Ion Injection Time (ms)`)</span>
 → <span style="color: #00BB00;">resolution</span> = <span style="font-style: italic;">as.numeric(one_of(`FT Resolution`, `Orbitrap Resolution`))</span>
 → <span style="color: #00BB00;">basePeakMz</span> = <span style="font-style: italic;">as.numeric(BasePeakMass)</span>
 → <span style="color: #00BB00;">basePeakIntensity</span> = <span style="font-style: italic;">as.numeric(BasePeakIntensity)</span>
 → <span style="color: #00BB00;">lowMass</span> = <span style="font-style: italic;">as.numeric(LowMass)</span>
 → <span style="color: #00BB00;">highMass</span> = <span style="font-style: italic;">as.numeric(HighMass)</span>
 → <span style="color: #00BB00;">rawOvFtT</span> = <span style="font-style: italic;">as.numeric(RawOvFtT)</span>
 → <span style="color: #00BB00;">intensCompFactor</span> = <span style="font-style: italic;">as.numeric(`OT Intens Comp Factor`)</span>
 → <span style="color: #00BB00;">agc</span> = <span style="font-style: italic;">as.character(AGC)</span>
 → <span style="color: #00BB00;">agcTarget</span> = <span style="font-style: italic;">as.integer(`AGC Target`)</span>
 → <span style="color: #00BB00;">microscans</span> = <span style="font-style: italic;">as.integer(`Micro Scan Count`)</span>
 → <span style="color: #00BB00;">numberLockmassesFound</span> = <span style="font-style: italic;">as.integer(`Number of LM Found`)</span>
 → <span style="color: #00BB00;">analyzerTemperature</span> = <span style="font-style: italic;">as.numeric(`Analyzer Temperature`)</span>
 → <span style="color: #BB00BB;">(.*)</span> = <span style="font-style: italic;">as.character(all_matches("(.*)"))</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">peaks</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">mzMeasured</span> = <span style="font-style: italic;">as.numeric(mass)</span>
 → <span style="color: #00BB00;">intensity</span> = <span style="font-style: italic;">as.numeric(intensity)</span>
 → <span style="color: #00BB00;">baseline</span> = <span style="font-style: italic;">as.numeric(baseline)</span>
 → <span style="color: #00BB00;">peakNoise</span> = <span style="font-style: italic;">as.numeric(noise)</span>
 → <span style="color: #00BB00;">peakResolution</span> = <span style="font-style: italic;">as.numeric(resolution)</span>
 → <span style="color: #00BB00;">isRefPeak</span> = <span style="font-style: italic;">as.logical(is_ref)</span>
 → <span style="color: #00BB00;">isLockPeak</span> = <span style="font-style: italic;">as.logical(is_lock_peak)</span>
<span style="font-weight: bold;">Dataset</span> <span style="color: #0000BB;">spectra</span>:
 → <span style="color: #00BB00;">scan.no</span> = <span style="font-style: italic;">as.integer(scan.no)</span>
 → <span style="color: #00BB00;">mz</span> = <span style="font-style: italic;">as.numeric(mass)</span>
 → <span style="color: #00BB00;">intensity</span> = <span style="font-style: italic;">as.numeric(intensity)</span>
</code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using the extended aggregator instead of the default (standard)</span></span>
<span><span class="va">raw_files</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/orbi_aggregate_raw.html">orbi_aggregate_raw</a></span><span class="op">(</span>aggregator <span class="op">=</span> <span class="st">"extended"</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-message"><code><span style="color: #00BB00;">✔</span> <span style="color: #B2B2B2;">[1.4s]</span> <span style="font-weight: bold;">aggregate_files()</span> aggregated <span style="color: #0000BB;">file_info</span> (3), <span style="color: #0000BB;">scans</span> (12.35k), <span style="color: #0000BB;">peaks</span>
(51.91k), and <span style="color: #0000BB;">spectra</span> (1.22k) from 3 files using the <span style="font-weight: bold; font-style: italic;">extended</span> aggregator
</code></pre>
<pre class="fansi fansi-message"><code>─────── <span style="font-weight: bold;">aggregated data from 3 raw files - retrieve with orbi_get_data()</span> ───────
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">file_info</span> (3): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">filepath</span>, <span style="color: #00BB00;">filename</span>, <span style="color: #00BB00;">creation_date</span>, <span style="color: #00BB00;">in_aquisition</span>,
<span style="color: #00BB00;">Operator</span>, <span style="color: #00BB00;">FileDescription</span>, <span style="color: #00BB00;">MassResolution</span>, <span style="color: #00BB00;">SpectraCount</span>, <span style="color: #00BB00;">FirstSpectrum</span>,
<span style="color: #00BB00;">LastSpectrum</span>, <span style="color: #00BB00;">StartTime</span>, <span style="color: #00BB00;">EndTime</span>, <span style="color: #00BB00;">LowMass</span>, <span style="color: #00BB00;">HighMass</span>, <span style="color: #00BB00;">InstrumentCount</span>,
<span style="color: #00BB00;">InstrumentModel</span>, <span style="color: #00BB00;">InstrumentName</span>, <span style="color: #00BB00;">SerialNumber</span>, <span style="color: #00BB00;">SoftwareVersion</span>,
<span style="color: #00BB00;">HardwareVersion</span>, <span style="color: #00BB00;">RawFileVersion</span>, <span style="color: #00BB00;">InstrumentUnits</span>, <span style="color: #00BB00;">Comment</span>, <span style="color: #00BB00;">SampleId</span>,
<span style="color: #00BB00;">SampleName</span>, <span style="color: #00BB00;">SampleType</span>, <span style="color: #00BB00;">SampleWeight</span>, <span style="color: #00BB00;">SampleVolume</span>, <span style="color: #00BB00;">Barcode</span>, <span style="color: #00BB00;">RowNumber</span>, <span style="color: #00BB00;">Vial</span>,
<span style="color: #00BB00;">InjectionVolume</span>, <span style="color: #00BB00;">DilutionFactor</span>, <span style="color: #00BB00;">IstdAmount</span>, <span style="color: #00BB00;">CalibrationLevel</span>,
<span style="color: #00BB00;">InstrumentMethodFile</span>, <span style="color: #00BB00;">CalibrationFile</span>, <span style="color: #00BB00;">ProcessingMethodFile</span>, <span style="color: #00BB00;">UserText0</span>,
<span style="color: #00BB00;">UserText1</span>, <span style="color: #00BB00;">UserText2</span>, <span style="color: #00BB00;">UserText3</span>, <span style="color: #00BB00;">UserText4</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">scans</span> (12.35k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">time.min</span>, <span style="color: #00BB00;">tic</span>, <span style="color: #00BB00;">it.ms</span>, <span style="color: #00BB00;">resolution</span>, <span style="color: #00BB00;">basePeakMz</span>,
<span style="color: #00BB00;">basePeakIntensity</span>, <span style="color: #00BB00;">lowMass</span>, <span style="color: #00BB00;">highMass</span>, <span style="color: #00BB00;">rawOvFtT</span>, <span style="color: #00BB00;">intensCompFactor</span>, <span style="color: #00BB00;">agc</span>,
<span style="color: #00BB00;">agcTarget</span>, <span style="color: #00BB00;">microscans</span>, <span style="color: #00BB00;">numberLockmassesFound</span>, <span style="color: #00BB00;">analyzerTemperature</span>,
<span style="color: #00BB00;">IsCentroidScan</span>, <span style="color: #00BB00;">ScanType</span>, <span style="color: #00BB00;">Scan Description</span>, <span style="color: #00BB00;">Multiple Injection</span>, <span style="color: #00BB00;">Multi Inject</span>
<span style="color: #00BB00;">Info</span>, <span style="color: #00BB00;">Scan Segment</span>, <span style="color: #00BB00;">Scan Event</span>, <span style="color: #00BB00;">Master Index</span>, <span style="color: #00BB00;">Master Scan Number</span>, <span style="color: #00BB00;">Charge State</span>,
<span style="color: #00BB00;">Monoisotopic M/Z</span>, <span style="color: #00BB00;">Error in isotopic envelope fit</span>, <span style="color: #00BB00;">Max. Ion Time (ms)</span>, <span style="color: #00BB00;">MS2</span>
<span style="color: #00BB00;">Isolation Width</span>, <span style="color: #00BB00;">MS2 Isolation Offset</span>, <span style="color: #00BB00;">HCD Energy</span>, <span style="color: #00BB00;">HCD Energy V</span>, <span style="color: #00BB00;">=== Mass</span>
<span style="color: #00BB00;">Calibration: ===</span>, <span style="color: #00BB00;">Conversion Parameter B</span>, <span style="color: #00BB00;">Conversion Parameter C</span>, <span style="color: #00BB00;">Temperature</span>
<span style="color: #00BB00;">Comp. (ppm)</span>, <span style="color: #00BB00;">RF Comp. (ppm)</span>, <span style="color: #00BB00;">Space Charge Comp. (ppm)</span>, <span style="color: #00BB00;">Resolution Comp. (ppm)</span>,
<span style="color: #00BB00;">Number of Lock Masses</span>, <span style="color: #00BB00;">Lock Mass #1 (m/z)</span>, <span style="color: #00BB00;">Lock Mass #2 (m/z)</span>, <span style="color: #00BB00;">Lock Mass #3</span>
<span style="color: #00BB00;">(m/z)</span>, <span style="color: #00BB00;">LM Search Window (ppm)</span>, <span style="color: #00BB00;">LM Search Window (mmu)</span>, <span style="color: #00BB00;">Last Locking (sec)</span>, <span style="color: #00BB00;">LM</span>
<span style="color: #00BB00;">m/z-Correction (ppm)</span>, <span style="color: #00BB00;">=== Ion Optics Settings: ===</span>, <span style="color: #00BB00;">S-Lens RF Level</span>, <span style="color: #00BB00;">====</span>
<span style="color: #00BB00;">Diagnostic Data: ====</span>, <span style="color: #00BB00;">Application Mode</span>, <span style="color: #00BB00;">Mild Trapping Mode</span>, <span style="color: #00BB00;">APD</span>, <span style="color: #00BB00;">Res. Dep.</span>
<span style="color: #00BB00;">Intens</span>, <span style="color: #00BB00;">Q Trans Comp</span>, <span style="color: #00BB00;">PrOSA NumF</span>, <span style="color: #00BB00;">PrOSA Comp</span>, <span style="color: #00BB00;">PrOSA ScScr</span>, <span style="color: #00BB00;">Dynamic RT Shift</span>
<span style="color: #00BB00;">(min)</span>, <span style="color: #00BB00;">Analytical OT usage (%)</span> (<span style="color: #BBBB00;">12.34k NA</span>), <span style="color: #00BB00;">LC FWHM parameter</span>, <span style="color: #00BB00;">PS Inj. Time</span>
<span style="color: #00BB00;">(ms)</span>, <span style="color: #00BB00;">AGC PS Mode</span>, <span style="color: #00BB00;">AGC PS Diag</span>, <span style="color: #00BB00;">AGC Target Adjust</span>, <span style="color: #00BB00;">AGC Diag 1</span>, <span style="color: #00BB00;">AGC Diag 2</span>, <span style="color: #00BB00;">HCD</span>
<span style="color: #00BB00;">abs. Offset</span>, <span style="color: #00BB00;">Source CID eV</span>, <span style="color: #00BB00;">AGC Fill</span>, <span style="color: #00BB00;">Injection t0</span>, <span style="color: #00BB00;">t0 FLP</span>, <span style="color: #00BB00;">Iso Para R</span>, <span style="color: #00BB00;">Inj</span>
<span style="color: #00BB00;">Para R</span>, <span style="color: #00BB00;">Access Id</span>, <span style="color: #00BB00;">Analog In A (V)</span>, <span style="color: #00BB00;">Analog In B (V)</span>, <span style="color: #00BB00;">FAIMS Attached</span>, <span style="color: #00BB00;">FAIMS</span>
<span style="color: #00BB00;">Voltage On</span>, <span style="color: #00BB00;">FAIMS CV</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">peaks</span> (51.91k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">mzMeasured</span>, <span style="color: #00BB00;">intensity</span>, <span style="color: #00BB00;">baseline</span>, <span style="color: #00BB00;">peakNoise</span>,
<span style="color: #00BB00;">peakResolution</span>, <span style="color: #00BB00;">isRefPeak</span>, <span style="color: #00BB00;">isLockPeak</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">spectra</span> (1.22k): <span style="color: #00BB00;">uidx</span>, <span style="color: #00BB00;">scan.no</span>, <span style="color: #00BB00;">mz</span>, <span style="color: #00BB00;">intensity</span>
</code></pre>
<pre class="fansi fansi-message"><code>→ <span style="color: #0000BB;">problems</span>: has a total of <span style="color: #BBBB00;">1 warning</span> → check with <span style="font-weight: bold;">orbi_get_problems(x)</span>
</code></pre>
</div>
<div class="section level3">
<h3 id="optional-check-for-problems">Optional: check for problems<a class="anchor" aria-label="anchor" href="#optional-check-for-problems"></a>
</h3>
<p>There were no problems reading and/or aggregating the raw data so
these are empty.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw_files</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/problems.html">orbi_get_problems</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span style="color: #949494;"># A tibble: 1 × 6</span>
   uidx file                    type    call  message                 condition 
  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    
<span style="color: #BCBCBC;">1</span>     3 testfile_dual_inlet.raw warning <span style="color: #BB0000;">NA</span>    missing 1 spectrum tha… <span style="color: #949494;">&lt;rlng_wrn&gt;</span>
</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">agg_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/problems.html">orbi_get_problems</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span style="color: #949494;"># A tibble: 1 × 6</span>
   uidx file                    type    call  message                 condition 
  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    
<span style="color: #BCBCBC;">1</span>     3 testfile_dual_inlet.raw warning <span style="color: #BB0000;">NA</span>    missing 1 spectrum tha… <span style="color: #949494;">&lt;rlng_wrn&gt;</span>
</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="retrieve-get-data">Retrieve (get) data<a class="anchor" aria-label="anchor" href="#retrieve-get-data"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">agg_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/orbi_get_data.html">orbi_get_data</a></span><span class="op">(</span>peaks <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-message"><code><span style="color: #00BB00;">✔</span> <span style="color: #B2B2B2;">[11ms]</span> <span style="font-weight: bold;">orbi_get_data()</span> retrieved 51.91k records from the combination of
<span style="color: #0000BB;">file_info</span> (3) and <span style="color: #0000BB;">peaks</span> (51.91k) via <span style="color: #00BB00;">uidx</span>
</code></pre>
<pre class="fansi fansi-output"><code><span style="color: #949494;"># A tibble: 51,909 × 10</span>
    uidx filename scan.no mzMeasured intensity baseline peakNoise peakResolution
   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>
<span style="color: #BCBCBC;"> 1</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>211.     8.32      513.          <span style="text-decoration: underline;">70</span>900
<span style="color: #BCBCBC;"> 2</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>463.     8.32      513.          <span style="text-decoration: underline;">94</span>100
<span style="color: #BCBCBC;"> 3</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>172.     8.31      513.          <span style="text-decoration: underline;">80</span>300
<span style="color: #BCBCBC;"> 4</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>116.     8.30      513.          <span style="text-decoration: underline;">87</span>900
<span style="color: #BCBCBC;"> 5</span>     1 nitrate…       1       62.0  4<span style="text-decoration: underline;">046</span>979      8.28      513.         <span style="text-decoration: underline;">114</span>902
<span style="color: #BCBCBC;"> 6</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>798.     8.26      513.          <span style="text-decoration: underline;">86</span>300
<span style="color: #BCBCBC;"> 7</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>444.     8.26      513.          <span style="text-decoration: underline;">93</span>200
<span style="color: #BCBCBC;"> 8</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>346.     8.25      513.          <span style="text-decoration: underline;">84</span>700
<span style="color: #BCBCBC;"> 9</span>     1 nitrate…       1       62.0     <span style="text-decoration: underline;">1</span>469.     8.25      513.          <span style="text-decoration: underline;">92</span>400
<span style="color: #BCBCBC;">10</span>     1 nitrate…       1       62.1     <span style="text-decoration: underline;">1</span>043.     8.16      513.          <span style="text-decoration: underline;">89</span>900
<span style="color: #949494;"># ℹ 51,899 more rows</span>
<span style="color: #949494;"># ℹ 2 more variables: isRefPeak &lt;lgl&gt;, isLockPeak &lt;lgl&gt;</span>
</code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Caj Neubauer, Sebastian Kopf, Kristýna Kantnerová.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
