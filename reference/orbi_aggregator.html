<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Dynamic data agreggator — orbi_start_aggregator • isoorbi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dynamic data agreggator — orbi_start_aggregator"><meta name="description" content="These functions allow definition of custom data aggregators for processing data extracted from raw files. An aggregator is run on each imported file and pulls together the relevant data users are interested in while making sure data formats are correct so that the aggregated data can be merged across several imported files for fast downstream processing."><meta property="og:description" content="These functions allow definition of custom data aggregators for processing data extracted from raw files. An aggregator is run on each imported file and pulls together the relevant data users are interested in while making sure data formats are correct so that the aggregated data can be merged across several imported files for fast downstream processing."><meta property="og:image" content="https://isoorbi.isoverse.org/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">isoorbi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/quick_start.html">Quick Start</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/shot_noise.html">Shot Noise</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/dual_inlet.html">Dual Inlet</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/flow_injection.html">Flow Injection</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/isoxl_demo.html">IsoXL demo GUI</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/isoverse/isoorbi"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dynamic data agreggator</h1>
      <small class="dont-index">Source: <a href="https://github.com/isoverse/isoorbi/blob/main/R/aggregation.R" class="external-link"><code>R/aggregation.R</code></a></small>
      <div class="d-none name"><code>orbi_aggregator.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions allow definition of custom data aggregators for processing data extracted from raw files. An aggregator is run on each imported file and pulls together the relevant data users are interested in while making sure data formats are correct so that the aggregated data can be merged across several imported files for fast downstream processing.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orbi_start_aggregator</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orbi_add_to_aggregator</span><span class="op">(</span></span>
<span>  <span class="va">aggregator</span>,</span>
<span>  <span class="va">dataset</span>,</span>
<span>  <span class="va">column</span>,</span>
<span>  source <span class="op">=</span> <span class="va">column</span>,</span>
<span>  default <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cast <span class="op">=</span> <span class="st">"as.character"</span>,</span>
<span>  regexp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  func <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  args <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orbi_register_aggregator</span><span class="op">(</span><span class="va">aggregator</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">aggregator</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orbi_get_aggregator</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>a descriptive name for the aggregator. This name is automatically used as the default name when registering the aggregator via <code>orbi_register_aggregator()</code>.</p></dd>


<dt id="arg-aggregator">aggregator<a class="anchor" aria-label="anchor" href="#arg-aggregator"></a></dt>
<dd><p>the aggregator table generated by <code>orbi_start_aggregator()</code> or passed from a previous call to <code>orbi_add_to_aggregator()</code> for constructing the entire aggregator by piping</p></dd>


<dt id="arg-dataset">dataset<a class="anchor" aria-label="anchor" href="#arg-dataset"></a></dt>
<dd><p>the name of the dataset to aggregate from (<code>file_info</code>, <code>scans</code>, <code>peaks</code>, <code>spectra</code>)</p></dd>


<dt id="arg-column">column<a class="anchor" aria-label="anchor" href="#arg-column"></a></dt>
<dd><p>the name of the column in which data should be stored</p></dd>


<dt id="arg-source">source<a class="anchor" aria-label="anchor" href="#arg-source"></a></dt>
<dd><p>single character column name or vector of column names (if alternatives could be the source) where in the <code>dataset</code> to find data for the <code>column</code>. If a vector of multiple column names is provided (e.g. <code>source = c("a1", "a2")</code>), the first column name that's found during processing of a dataset will be used and passed to the function defined in <code>func</code> (if any) and then the one defined in <code>cast</code>. To provide multiple parameters from the data to <code>func</code>, define a list instead of a vector <code>source = list("a", "b", "c")</code> or if multiple alternative columns can be the source for any of the arguments, define as <code>source = list(c("a1", "a2"), "b", c("c1", "c2", "c3"))</code></p></dd>


<dt id="arg-default">default<a class="anchor" aria-label="anchor" href="#arg-default"></a></dt>
<dd><p>the default value if no <code>source</code> columns can be found or another error is encountered during aggregatio. Note that the <code>default</code> value will also be processed with the function in <code>cast</code> to make sure it has the correct data type.</p></dd>


<dt id="arg-cast">cast<a class="anchor" aria-label="anchor" href="#arg-cast"></a></dt>
<dd><p>what to cast the values of the resulting column to, most commonly <code>"as.character"</code>, <code>"as.integer"</code>, <code>"as.numeric"</code>, or <code>"as.factor"</code>. This is required to ensure all aggregated values have the correct data type.</p></dd>


<dt id="arg-regexp">regexp<a class="anchor" aria-label="anchor" href="#arg-regexp"></a></dt>
<dd><p>whether source columm names should be interpreted as a regular expressions for the purpose of finding the relevant column(s). Note if <code>regexp = TRUE</code>, the search for the source column always becomes case-insensitive so this can also be used for a direct match of a source column whose upper/lower casing can be unreliable. If a column is matched by a regexp and also by a direct aggregator rule, the direct aggregator rule takes precedence.</p></dd>


<dt id="arg-func">func<a class="anchor" aria-label="anchor" href="#arg-func"></a></dt>
<dd><p>name of a processing function to apply before casting the value with the <code>cast</code> function. This is optional and can be used to conduct more elaborate preprocessing of a data or combining data from multiple source columns in the correct way (e.g. pasting together from multiple columns).</p></dd>


<dt id="arg-args">args<a class="anchor" aria-label="anchor" href="#arg-args"></a></dt>
<dd><p>an optional list of arguments to pass to the <code>func</code> in addition to the values coming from the source colummn(s)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an orbi aggregator tibble</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>orbi_start_aggregator()</code>: starts the aggregator</p></li>
<li><p><code>orbi_add_to_aggregator()</code>: add additional column to aggregate data for. Overwrites an existing aggregator entry for the same dataset and column if it already exists.</p></li>
<li><p><code>orbi_register_aggregator()</code>: register an aggregator in the isoorbi options so it can be retrieved with <code>orbi_get_aggregator()</code></p></li>
<li><p><code>orbi_get_aggregator()</code>: retrieve a registered aggregator (get all aggregators with <code>orbi_get_option("aggregators")</code>)</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Caj Neubauer, Sebastian Kopf, Kristýna Kantnerová.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

